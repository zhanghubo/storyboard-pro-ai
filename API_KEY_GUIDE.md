# 🔑 火山引擎API密钥获取指南

## ❌ 您遇到的错误

```
错误：The API key format is incorrect
状态码：401 Unauthorized
原因：API密钥格式不正确或无效
```

---

## ✅ 正确获取API密钥

### 方法1：从火山引擎控制台获取（推荐）

#### 第1步：登录控制台
访问：https://console.volcengine.com/ark

#### 第2步：进入API密钥管理
有两种入口：

**入口A：右上角菜单**
1. 点击右上角的**用户名**或**头像**
2. 选择"**API访问密钥**"或"**密钥管理**"

**入口B：左侧菜单**
1. 找到"**个人中心**"或"**账户管理**"
2. 点击"**API密钥**"或"**访问控制**"

#### 第3步：创建或查看密钥

**如果没有密钥：**
1. 点击"**新建密钥**"或"**创建API Key**"
2. 输入密钥名称（如：storyboard-app）
3. 点击"确定"
4. **重要：立即复制密钥**（只显示一次）
5. 妥善保存密钥

**如果已有密钥：**
1. 找到密钥列表
2. 点击"**查看**"或"**复制**"按钮
3. 完整复制密钥

### 方法2：使用子账号密钥（企业用户）

如果您是企业用户，可能需要：
1. 让管理员创建子账号
2. 分配API访问权限
3. 使用子账号的密钥

---

## 🎯 API密钥格式说明

### ✅ 正确的格式

火山引擎的API Key格式类似：
```
AKLTxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

**特征：**
- ✅ 以 `AKLT` 开头（常见）
- ✅ 全是大小写字母和数字
- ✅ 长度约40-100个字符
- ✅ 没有空格
- ✅ 没有换行

### ❌ 错误的格式

```
sk-xxxxx  ← 这是OpenAI格式，不是火山引擎！
AKLT xxx xxx  ← 有空格
AKLT...（被截断）  ← 不完整
```

---

## 📋 配置步骤

### 第1步：复制API密钥
从控制台完整复制密钥

### 第2步：粘贴到配置框
在网页的"API密钥"输入框中粘贴

**注意事项：**
- ⚠️ 粘贴后检查开头和结尾
- ⚠️ 确保没有多余的空格
- ⚠️ 确保没有换行符

### 第3步：测试连接
点击"🔌 测试"按钮

**成功标志：**
```
✅ 绿色 "✓ 连接成功"
```

**失败处理：**
- 401错误 → 密钥错误，重新复制
- 404错误 → Endpoint ID错误
- 其他错误 → 查看控制台详细信息

---

## 🔧 常见问题

### Q1: 我找不到API密钥在哪里？

**A:** 火山引擎的密钥管理位置可能在：

1. **用户中心 → API密钥**
2. **账户管理 → 访问控制 → API密钥**
3. **个人中心 → 安全设置 → API访问密钥**

如果还是找不到：
- 搜索"API密钥"或"API Key"
- 联系火山引擎客服
- 查看官方文档

### Q2: 密钥显示"已隐藏"或"***"？

**A:** 密钥创建后只显示一次！

**如果忘记了：**
1. 删除旧密钥
2. 创建新密钥
3. 立即复制并保存

**建议：**
- 创建后立即保存到密码管理器
- 或保存到安全的文本文件
- 不要保存到公开位置

### Q3: 密钥有使用限制吗？

**A:** 可能有：

1. **配额限制**
   - 每天/每月的调用次数
   - 查看控制台的配额管理

2. **权限限制**
   - 某些密钥只能访问特定服务
   - 创建时选择"全部权限"

3. **IP限制**
   - 某些密钥可能有IP白名单
   - 需要在控制台配置

### Q4: 如何验证密钥是否有效？

**方法1：在网页上测试**
- 填入密钥
- 点击"🔌 测试"
- 查看结果

**方法2：使用curl命令**
```bash
curl -X POST \
  https://ark.cn-beijing.volces.com/api/v3/chat/completions \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -d '{
    "model": "YOUR_ENDPOINT_ID",
    "messages": [{"role": "user", "content": "你好"}]
  }'
```

**成功响应：**
```json
{
  "choices": [
    {
      "message": {
        "content": "你好！..."
      }
    }
  ]
}
```

**失败响应：**
```json
{
  "error": {
    "message": "The API key format is incorrect"
  }
}
```

---

## 💡 密钥安全建议

### ✅ 安全做法

1. **妥善保存**
   - 使用密码管理器
   - 加密存储
   - 定期更换

2. **权限最小化**
   - 只授予必要的权限
   - 使用子账号密钥

3. **监控使用**
   - 定期查看调用记录
   - 设置用量告警
   - 及时发现异常

### ❌ 危险操作

1. ❌ 不要提交到Git仓库
2. ❌ 不要分享给他人
3. ❌ 不要保存到公开位置
4. ❌ 不要在浏览器控制台打印

---

## 📞 需要帮助？

### 火山引擎官方资源

- **官方文档**: https://www.volcengine.com/docs
- **控制台**: https://console.volcengine.com/ark
- **技术支持**: 控制台右下角的客服按钮

### 检查清单

在联系支持前，准备好：
- [ ] 账户ID
- [ ] 使用的服务（模型推理/豆包）
- [ ] 错误截图
- [ ] 错误状态码（401/404/500等）
- [ ] 大概的错误时间

---

## ✅ 配置成功标志

当密钥配置正确时：

1. **测试按钮**
   - 🟢 显示"✓ 连接成功"

2. **浏览器控制台**
   ```
   [代理] API响应状态: 200
   [代理] 请求成功
   ```

3. **可以正常使用**
   - 生成分镜描述
   - 看到AI生成的内容
   - 没有401错误

---

**立即获取正确的API密钥，再试一次！** 🔑✨


# 🎬 完整AI工作流使用指南

## 🌟 三合一AI工作流

本系统实现了**文本→图像→视频**的完整创作流程：

```
📝 故事文本
    ↓ 
🤖 AI生成分镜描述（文本生成）
    ↓
🎨 生成每个分镜的提示词
    ↓
🖼️ 文生图：为每个分镜生成图片（可选）
    ↓
🎬 图文生视频：将所有图片合成视频（可选）
    ↓
✅ 完整故事板作品
```

## 🚀 快速开始

### 第一步：配置三个API

访问 http://localhost:3000，您会看到**高级配置面板**：

#### 1️⃣ 文本生成API（必需）⭐

**火山引擎豆包配置：**
1. 访问 https://console.volcengine.com/ark
2. 选择大语言模型（如 Doubao-pro-4k）
3. 创建推理接入点
4. 复制 **Endpoint ID**（格式：`ep-20241218xxxxx-xxxxx`）
5. 复制 **API Key**

在配置面板填入：
- 服务商：选择"火山引擎豆包"
- Endpoint ID：粘贴您的ID
- API密钥：粘贴您的Key
- 点击"🔌 测试"按钮验证连接

#### 2️⃣ 图像生成API（可选）🎨

勾选"**启用图像生成**"后：

1. 在火山引擎控制台进入"图像生成"模块
2. 选择文生图模型（如 stable-diffusion）
3. 创建推理接入点
4. 获取图像的 **Endpoint ID**

在配置面板填入：
- 服务商：火山引擎豆包-图像
- Endpoint ID：图像模型的ID
- API密钥：可使用相同Key或新Key

#### 3️⃣ 视频生成API（可选）🎥

勾选"**启用视频合成**"后：

1. 在火山引擎控制台进入"视频生成"模块
2. 选择视频合成模型
3. 创建推理接入点
4. 获取视频的 **Endpoint ID**

在配置面板填入：
- 服务商：火山引擎豆包-视频
- Endpoint ID：视频模型的ID
- API密钥：可使用相同Key或新Key

### 第二步：选择分镜数量

选择您需要的分镜数量：
- **9个** (3×3) - 适合短片或预告片
- **15个** (3×5) - 标准故事长度
- **20个** (4×5) - 长篇或详细叙事

### 第三步：配置输出选项

**输出模式：**
- 🎴 **单图模式**：生成多张独立图片
- 🎬 **拼图模式**：将所有分镜汇集在一张大图中

**画面比例：**
- ⬜ **横版 16:9**：适合电脑、电视观看
- 📱 **竖版 9:16**：适合手机、短视频平台

### 第四步：输入故事

在文本框中输入您的故事，例如：

```
一个孤独的宇航员在火星上发现了古老的文明遗迹。
他意识到这可能改变人类对宇宙的认知...
```

选择视觉风格：
- 电影感
- 动画风格
- 写实风格
- 科幻风格

### 第五步：一键生成

点击"**开始生成**"按钮，系统将自动执行：

#### 阶段1：文本生成（约10-30秒）
```
📝 正在生成分镜描述...
```
AI将故事拆分成多个场景，为每个分镜生成：
- 场景描述
- 角色动作
- 环境细节
- 镜头类型

#### 阶段2：提示词生成（约5秒）
```
🎨 正在生成AI绘画提示词...
```
为每个分镜创建详细的图像生成提示词。

#### 阶段3：图像生成（如果启用，约2-10分钟）
```
🖼️ 正在生成图片 3/15...
```
使用文生图API为每个分镜生成图片：
- 显示实时进度
- 每张图片约5-30秒
- 自动防止API限流

#### 阶段4：视频合成（如果启用，约1-5分钟）
```
🎬 正在合成视频...
```
将所有图片合成为视频：
- 添加转场效果
- 设置每个分镜时长
- 生成最终视频文件

### 第六步：查看结果

生成完成后，您可以看到：

#### 🎬 视频播放器（如果生成了视频）
- 在线预览视频
- 下载MP4文件
- 复制分享链接

#### 🖼️ 图片画廊（如果生成了图片）
- 网格预览所有分镜图片
- 单独下载任意图片
- 批量下载全部图片

#### 📋 提示词列表
- 查看每个分镜的详细提示词
- 复制单个或全部提示词
- 下载分镜脚本（支持MD/DOC/PDF/JSON/TXT）

## 💡 三种使用模式

### 模式1：仅生成提示词
**配置：** 只填文本生成API  
**适用：** 想自己使用其他工具生成图片  
**输出：** 分镜描述 + AI绘画提示词

### 模式2：文本 + 图像
**配置：** 填文本生成API + 图像生成API  
**适用：** 需要完整的故事板图片  
**输出：** 分镜描述 + 提示词 + 图片

### 模式3：完整工作流（推荐）✨
**配置：** 填全部三个API  
**适用：** 需要最终视频作品  
**输出：** 分镜描述 + 提示词 + 图片 + 视频

## 💰 成本估算（15个分镜）

| 模式 | 包含内容 | 预计费用 |
|------|---------|---------|
| 仅提示词 | 文本生成 | ¥0.04 |
| 文本+图像 | 文本 + 15张图片 | ¥1.24 |
| 完整流程 | 文本 + 图片 + 视频 | ¥23.74 |

*费用基于火山引擎豆包价格，仅供参考*

## 🎯 最佳实践

### 故事描述技巧

✅ **好的描述：**
```
夜晚的城市，霓虹灯闪烁。侦探站在雨中的街角，
手里拿着一张泛黄的照片。远处传来警笛声，
他知道时间不多了...
```

❌ **不好的描述：**
```
一个故事
```

### 提示：
- 包含**场景**、**角色**、**动作**、**情绪**
- 描述视觉细节（光线、色彩、氛围）
- 保持故事连贯性
- 字数建议：100-500字

### 风格选择建议

- **电影感**：适合剧情片、悬疑片
- **动画风格**：适合儿童、奇幻题材
- **写实风格**：适合纪录片、传记
- **科幻风格**：适合未来、太空题材

## 🔧 故障排除

### 文本生成失败
- ✅ 检查Endpoint ID格式（ep-开头）
- ✅ 验证API密钥是否正确
- ✅ 确认账户余额充足

### 图像生成失败
- ✅ 提示词可能包含敏感内容
- ✅ 检查图像API配额
- ✅ 尝试更换描述方式

### 视频合成超时
- ✅ 正常现象，视频合成需要1-5分钟
- ✅ 不要刷新页面
- ✅ 查看火山引擎控制台任务状态

## 📊 时间预估

| 分镜数量 | 文本生成 | 图像生成 | 视频合成 | 总时间 |
|---------|---------|---------|---------|--------|
| 9个 | 10秒 | 1-3分钟 | 1-2分钟 | 2-5分钟 |
| 15个 | 20秒 | 2-5分钟 | 2-3分钟 | 4-8分钟 |
| 20个 | 30秒 | 3-10分钟 | 3-5分钟 | 6-15分钟 |

## 🎨 输出格式

### 图片格式
- **格式：** JPG / PNG
- **尺寸：**
  - 16:9横版：1920×1080
  - 9:16竖版：1080×1920

### 视频格式
- **格式：** MP4
- **编码：** H.264
- **帧率：** 30fps
- **时长：** 每个分镜3秒（可调整）

### 文档格式
- Markdown (.md)
- Microsoft Word (.doc)
- HTML (.html)
- JSON (.json)
- 纯文本 (.txt)

## 🚀 高级功能

### 自定义参数（即将支持）
- 每个分镜的持续时间
- 转场效果类型
- 背景音乐添加
- 字幕自动生成

### 批量处理（计划中）
- 一次处理多个故事
- 自动化工作流
- API队列管理

## 📞 获取帮助

- 📖 查看 `COMPLETE_WORKFLOW.md` - 完整技术文档
- 🔧 查看 `DOUBAO_CONFIG.md` - 火山引擎配置详解
- 💬 遇到问题？检查终端日志

---

**开始创作您的故事板吧！** 🎬✨


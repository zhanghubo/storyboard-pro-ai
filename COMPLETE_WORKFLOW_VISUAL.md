# 🎬 完整工作流程可视化指南

## 三步走：从文字到视频

您的故事板生成器支持**完整的 AI 工作流程**：

```
📝 故事描述 
    ↓ 【文字大模型】
🎨 分镜提示词 
    ↓ 【文生图模型】
🖼️ 分镜图片 
    ↓ 【图生视频模型】
🎬 完整视频
```

---

## 🎯 第一步：配置三个 API

### 在第一页"⚙️ 完整AI配置"中：

#### 1️⃣ 文字大模型（必需）
```
✅ 选择供应商：豆包大模型 / DeepSeek / OpenAI / Anthropic
📝 填写：Endpoint ID（例如：doubao-seed-1-6-lite-251015）
🔑 填写：API 密钥（以 AKLT 开头）
🔌 点击：测试连接 → 看到绿色 ✓ 连接成功
```

#### 2️⃣ 文生图模型（可选，生成图片需要）
```
☑️ 勾选："启用图像生成"
📝 填写：图像 Endpoint ID（例如：doubao-image-v1-1024）
🔑 填写：API 密钥
🔌 点击：测试连接 → 看到绿色 ✓ 连接成功
```

#### 3️⃣ 图生视频模型（可选，生成视频需要）
```
☑️ 勾选："启用视频合成"
📝 填写：视频 Endpoint ID（例如：doubao-video-v1）
🔑 填写：API 密钥
🔌 点击：测试连接 → 看到绿色 ✓ 连接成功
```

---

## 🎨 第二步：选择分镜数量

```
选项：
○ 9 张 (3×3)
○ 15 张 (3×5) ← 推荐
○ 20 张 (4×5)
```

---

## ✍️ 第三步：输入故事

```
1. 输入故事描述（例如：一个小女孩在森林中探险...）
2. 选择视觉风格（例如：电影感 / 动画风格 / 写实风格）
3. 选择输出模式：
   ○ 单图模式：生成独立的图片
   ○ 拼图模式：生成合并的大图
4. 选择画幅比例：
   ○ 16:9 横版
   ○ 9:16 竖版
```

---

## 🎬 第四步：生成并查看结果

### 自动生成流程：

#### 阶段 1：生成文字提示词 (2-5秒)
```
📝 正在生成分镜描述...
📐 正在优化分镜布局...
🎨 正在生成AI绘画提示词...
```

#### 阶段 2：生成分镜图片 (30-60秒，如果启用)
```
🖼️ 正在生成图片 1/15...
🖼️ 正在生成图片 2/15...
...
✅ 图片生成完成！
```

#### 阶段 3：合成视频 (60-120秒，如果启用)
```
🎬 正在准备视频合成...
🎬 正在处理帧序列...
🎬 正在渲染视频...
✅ 视频生成完成！
```

---

## 📊 结果页面包含：

### 1. 📝 分镜提示词
- ✅ 每个分镜的完整 AI 绘画提示词
- ✅ 可以单独复制
- ✅ 可以批量复制全部
- ✅ 可以下载（Markdown / Word / HTML / JSON / TXT）

### 2. 🎨 网格预览
- ✅ 可视化网格布局
- ✅ **如果生成了图片，会直接显示在网格中**
- ✅ 点击任意分镜查看详情

### 3. 🖼️ 图片画廊（如果启用了图像生成）
```
🖼️ 生成的分镜图片 (15张)
┌─────────┬─────────┬─────────┐
│ [图片1] │ [图片2] │ [图片3] │
├─────────┼─────────┼─────────┤
│ [图片4] │ [图片5] │ [图片6] │
├─────────┼─────────┼─────────┤
│   ...   │   ...   │   ...   │
└─────────┴─────────┴─────────┘

每张图片都可以：
- 点击查看大图
- 悬停显示下载按钮
- 批量下载全部
```

### 4. 🎬 视频播放器（如果启用了视频生成）
```
🎬 生成的故事板视频
┌──────────────────────────────┐
│                              │
│     [视频播放器]             │
│                              │
│     ▶️ 播放 / ⏸️ 暂停         │
│     ━━━━━━━━━━━━━━━━━━━━━━   │
└──────────────────────────────┘

功能：
- ⬇️ 下载视频
- 🔗 复制链接
- 📱 分享
```

---

## ❓ 常见问题排查

### Q1: 为什么只看到提示词，没有图片？

**答**：您没有启用图像生成功能。

**解决方案**：
1. 点击"🔄 重新开始"按钮
2. 在第一步配置页面，勾选 ☑️ "启用图像生成"
3. 填写图像模型的 Endpoint ID 和 API 密钥
4. 测试连接成功后，重新生成

---

### Q2: 图片生成失败怎么办？

**可能原因**：
- ❌ API 密钥错误
- ❌ Endpoint ID 错误
- ❌ 账户余额不足
- ❌ 网络问题

**检查步骤**：
1. 查看浏览器控制台（F12）的错误信息
2. 检查 API 密钥是否完整（以 AKLT 开头）
3. 前往火山引擎控制台确认余额
4. 尝试重新测试 API 连接

---

### Q3: 视频生成失败但图片成功？

**答**：正常现象，视频合成比图片生成更复杂。

**可能原因**：
- 图片数量不足
- 视频 API 配置错误
- 视频合成超时

**解决方案**：
- 确保至少有 3 张成功的图片
- 检查视频模型配置
- 尝试减少分镜数量（如 9 张）

---

### Q4: 如何只生成提示词（不要图片/视频）？

**答**：在配置页面：
- ☐ 不勾选"启用图像生成"
- ☐ 不勾选"启用视频合成"

这样只会调用文字大模型，生成提示词。

---

## 💰 费用参考（15个分镜）

| 模式 | 使用的 API | 预估费用 |
|------|-----------|---------|
| 仅提示词 | 文字大模型 | ¥0.04 |
| 提示词 + 图片 | 文字 + 文生图 | ¥1.24 |
| 完整流程 | 文字 + 文生图 + 图生视频 | ¥23.74 |

**注意**：实际费用以火山引擎计费为准。

---

## 🎯 最佳实践

### 1. 测试时使用小数量
- 第一次使用建议选择 **9 张分镜**
- 确认图片生成正常后，再使用 15/20 张

### 2. 分步骤测试
- 第一次：只生成提示词（不勾选图像/视频）
- 第二次：生成提示词 + 图片（勾选图像，不勾选视频）
- 第三次：完整流程（全部勾选）

### 3. 优化提示词
- 使用生成的提示词，在其他 AI 绘画工具（Midjourney / Stable Diffusion）测试
- 根据结果调整故事描述和风格偏好

### 4. 保存工作成果
- 及时下载生成的图片和视频
- 下载分镜脚本（Markdown / Word 格式）

---

## 🚀 完整示例演示

### 输入
```
故事描述：
一个小女孩在魔法森林中寻找失落的星星，
遇到了会说话的动物朋友们，
最终找到了闪耀的星星并许下愿望。

视觉风格：吉卜力动画风格
分镜数量：15 张
输出模式：单图模式
画幅比例：16:9 横版

API 配置：
✅ 文字大模型：豆包
✅ 文生图模型：豆包图像
✅ 图生视频：豆包视频
```

### 输出
```
✅ 15 个精心设计的分镜提示词
✅ 15 张精美的分镜图片（显示在网格中）
✅ 1 个 45 秒的故事板视频

可以：
📋 复制提示词到其他 AI 工具
🖼️ 下载所有图片用于演示
🎬 下载视频用于分享
📄 下载完整脚本用于制作
```

---

## 🎨 可视化效果展示

### 网格中的图片显示

```
分镜网格预览（已生成图片时）：
┌─────────────────┬─────────────────┬─────────────────┐
│  [背景图片]     │  [背景图片]     │  [背景图片]     │
│  ┌──────────┐   │  ┌──────────┐   │  ┌──────────┐   │
│  │  #1 ⭐   │   │  │  #2      │   │  │  #3      │   │
│  │          │   │  │          │   │  │          │   │
│  │  全景镜头 │   │  │  中景镜头 │   │  │  特写镜头 │   │
│  │  开场建立 │   │  │  叙事推进 │   │  │  情感高潮 │   │
│  └──────────┘   │  └──────────┘   │  └──────────┘   │
└─────────────────┴─────────────────┴─────────────────┘
```

每个单元格：
- 🖼️ **背景**：生成的分镜图片
- 🔢 **编号**：分镜序号
- ⭐ **标记**：关键帧标识
- 📍 **位置**：网格位置
- 🎥 **类型**：镜头类型
- 📝 **角色**：叙事角色

---

## ✨ 总结

您的故事板生成器**已经完全支持**从文字到视频的完整工作流程：

1. **配置一次**：设置三个 API（文字、图像、视频）
2. **输入故事**：描述您的故事和视觉风格
3. **自动生成**：
   - ✍️ 专业的分镜提示词
   - 🎨 精美的分镜图片
   - 🎬 完整的故事板视频
4. **导出使用**：
   - 下载图片/视频
   - 下载脚本文档
   - 复制提示词到其他 AI 工具

---

**🎉 现在就开始使用吧！**

访问：http://localhost:3000

按照三步走流程：
1. ⚙️ 配置 API
2. ✍️ 输入故事
3. 🎬 查看结果

有任何问题，查看浏览器控制台（F12）的详细日志！

